{"version":3,"sources":["../../src/controller/subcategory.js"],"names":["config","db","api","post","req","res","findById","params","id","err","category","status","json","message","newSubCategory","categoryId","_id","subCategoryTitle","body","save","get","find","subCategory","put","catagoryId","messsage","delete","remove"],"mappings":"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","file":"subcategory.js","sourcesContent":["import mongoose from 'mongoose';\nimport { Router } from 'express';\nimport SubCategory from '../model/subcategory';\nimport Category from '../model/category';\nimport bodyParser from 'body-parser';\n\nimport { authenticate } from '../middleware/authMiddleware';\n\nexport default({ config, db }) => {\n  let api = Router();\n\n  ///v1/subcategory/add/:categoryId - Create\n  api.post('/add/:id', authenticate, (req, res) => {\n    Category.findById(req.params.id, (err, category) => {\n      if (err) {\n        res.status(500).json({message: err});\n        return;\n      }\n\n      let newSubCategory= new SubCategory();\n      newSubCategory.categoryId = category._id\n      newSubCategory.subCategoryTitle = req.body.subCategoryTitle;\n      newSubCategory.save(err => {\n        if (err) {\n          res.status(500).json({message: `An error has occured ${err. message}`});\n          return;\n        }\n          res.status(200).json({message: 'Subcategory saved successfully'});\n      });\n    });\n  });\n\n  // /v1/subcategory/:id Read 1\n  api.get('/', authenticate, (req, res) => {\n    SubCategory.find({}, (err, subCategory) => {\n      if (err) {\n        res.status(500).json({message: `An error has occured ${err. message}`});\n        return;\n      }\n        res.status(200).json(subCategory);\n    });\n  });\n\n// v1/subcategory/byCategory/:categoryId\napi.get('/bycategory/:id', (req, res) => {\n  SubCategory.find({ categoryId: req.params.id}, (err, subCategory) => {\n    if (err) {\n      res.status(500).json({message: `An error has occured ${err. message}`});\n      return;\n    }\n      res.status(200).json(subCategory);\n  });\n});\n\n  // /v1/product/update/:id - Update 1\n  api.put('/:id', authenticate, (req, res) => {\n    SubCategory.findById(req.params.id, (err, subCategory) => {\n      if (err) {\n        res.status(500).json({message: `An error has occured ${err. message}`});\n        return;\n      }\n      subCategory.categoryId = req.body.catagoryId;\n      subCategory.subCategoryTitle = req.body.subCategoryTitle;\n\n        subCategory.save(err => {\n            if (err) {\n              res.status(500).json({messsage: `An error has occured ${err. message}`});\n              return;\n            }\n              res.status(200).json({message: 'Subcategory updated successfully'});\n          });\n      });\n  });\n\n  // // /v1/subcategory/byCategory/:categoryId Read\n  // api.get('/byCategory/:categoryId', authenticate, (req, res) => {\n  //   SubCategory.find({'categoryId': req.params.categoryId}, (err, subCategory) => {\n  //     if (err) {\n  //       res.status(500).json({message: err});\n  //       return;\n  //     }\n  //       res.status(200).json(subCategory);\n  //   });\n  // });\n\n  // /v1/product/:id Delete 1\n  api.delete('/:id', authenticate, (req, res) => {\n    SubCategory.findById(req.params.id, (err, subCategory) => {\n      if (err) {\n        res.status(500).json({message: err});\n        return;\n      }\n      SubCategory.remove(req.params.id, (err, subCategory) => {\n        if (err) {\n          res.status(500).json({message: err});\n          return;\n        }\n          res.status(200).json({message: `Subcategory: ${subCategory._id} deleted successfully`});\n      });\n    });\n  });\n\n\n  return api;\n}\n"]}